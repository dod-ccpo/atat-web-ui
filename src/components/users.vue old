<template>
  <div>
    <v-chip class="body-text form-field-label-error" v-for="contact in contacts" :key="contact.sys_id">
    {{ contact.last_name + ", " + contact.first_name }}
    </v-chip>
  
  </div>

</template>

 <script>
export default {
  name: 'Users',
  props: {
    msg: String
  },
  data(){
    return{
      contacts: null,
    }
  },
  mounted(){
    this.fetchUsers();
  },
  methods:{
    fetchUsers(){
      fetch(
        "https://dev113490.service-now.com/api/now/table/sys_user",
        {
          withCredentials: true,
          credentials: "include"
        }
      )
        .then( async res => res.json())
        .then( async data => {
          console.log(data);
          this.contacts = data.result.sort(this.compare_last_name);
        })
        .catch(console.log);
    },
    compare_last_name( a, b )
      {
      if ( a.last_name.toLowerCase() < b.last_name.toLowerCase()){
        return -1;
      }
      if ( a.last_name.toLowerCase() > b.last_name.toLowerCase()){
        return 1;
      }
      return 0;
    }
  }
}
 </script>

<!-- Add "scoped" attribute to limit CSS to this component only 
<style scoped>
h3 {
  margin: 40px 0 0;
}
ul {
  list-style-type: none;
  padding: 0;
}
li {
  display: inline-block;
  margin: 0 10px;
}
a {
  color: #42b983;
}
</style>
-->
